## Cookie


Cookie 是通过浏览器将服务器返回的数据保存在本地的一小块数据（一般小于4kb）。当浏览器发送请求且浏览器存在 Cookie 时，浏览器会自动在请求头携带上 Cookie 数据。引入 Cookie 的意义是因为 HTTP 的请求是无状态的，如：浏览器发出的请求服务器没办法区分浏览器用户身份以及用户的相关操作状态（可以通过 Cookie 传递这些信息）。最开始 Cookie 被作为唯一的存储手段，但是因为浏览器的每次请求都会携带上 Cookie，会带来额外的开销，而且存储量比较小，所以后来浏览器推出了新的 Api（web stoeage Api和 indexedDb）

#### 用处

-   会话状态管理（如用户登录状态、及其他需要记录的信息）
-   个性化设置（如用户自定义设置）
-   浏览器追踪行为（如追踪分析用户行为）

#### 创建Cookie

当服务器收到 HTTP 请求时，服务器可以在响应头里设置一个 **Set-cookie** 选项，浏览器接收到响应后会自动保存下 Cookie，之后浏览器对该服务器的每一次请求中都会通过请求头把 Cookie 信息发送给服务器

## uesr-agent

用户代理（User Agent，简称 UA），是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器、渲染引擎、浏览器语言、浏览器插件等

## referer

referer的意思简言之，HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器我是从哪个页面链接过来的，服务器籍此可以获得一些信息用于处理

比如在一个网页里面插入一个超链接，链接到其他的网页，那么当点击这个超链接从而链接到另外一个页面的时候，相当于浏览器向 web 服务器发送了一个 http 请求，对于另外一个页面而言，这个 referer 就是上一个页面的 URL，而对于从地址栏里面直接输入 URL 或者是刷新网页的方式，则 referer = null，通过设置这个 referer 可以防止盗链的问题。
例如从我主页上链接到一个朋友那里，他的服务器就能够从HTTP Referer中统计出每天有多少用户点击我主页上的链接访问他的网站

### 伪造IP

实现TCP层级别的伪造很难，因为很难实现正常的TCP连接；但是在应用层协议HTTP上的实现较容易，通过伪造IP，能欺骗多数服务器应用程序实现通信。

**对于绕过服务器的IP地址过滤**或者**伪造来源IP**特别有用，导致的后果就是**非授权IP能访问服务器，甚至能钻服务器的漏洞**

HTTP 连接基于 TCP 连接，HTTP 协议中没有 IP 的概念，只能通过`X-Forwarded-For`来实现

`X-Forwarded-For`位于HTTP协议的请求头， 是一个 HTTP 扩展头部，**用来表示 HTTP 请求端真实 IP**
```
X-Forwarded-For:127.0.0.1 常用实例
```

必须在upgrade-insecure-requests之上

有时需要将cookie删除

**X-Real-Ip**

### index.php

备份文件为`index.php.bak`